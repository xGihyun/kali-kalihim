---
import Layout from "@/components/layouts/layout.astro";
import MatchmakeForm from "@/components/user/admin/matchmake";
import { db } from "@/drizzle/db";
import {
  ArnisSeasonsTable,
  ArnisTechniquesTable,
  SectionsTable,
} from "@/drizzle/schema";
import { getPersistedPairs } from "@/lib/power-cards";

const arnisTechniques = await db.select().from(ArnisTechniquesTable);
const sections = await db.select().from(SectionsTable);
const arnisSeasons = await db.select().from(ArnisSeasonsTable);

await getPersistedPairs()
---

<Layout title="Matchmake">
  <MatchmakeForm
    arnisTechniques={arnisTechniques}
    sections={sections}
    arnisSeasons={arnisSeasons}
    client:load
  />
</Layout>
